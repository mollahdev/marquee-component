var S=Object.defineProperty;var M=(n,i,r)=>i in n?S(n,i,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[i]=r;var a=(n,i,r)=>(M(n,typeof i!="symbol"?i+"":i,r),r),N=(n,i,r)=>{if(!i.has(n))throw TypeError("Cannot "+r)};var R=(n,i,r)=>{if(i.has(n))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(n):i.set(n,r)};var p=(n,i,r)=>(N(n,i,"access private method"),r);(function(n){typeof define=="function"&&define.amd?define(n):n()})(function(){var A,v,b,z,E,u,$,C,g,I,w;"use strict";const n="marquee-component",i="marquee-move",r="marquee-slide",O="marquee-mount",t=Object.freeze({HORIZONTAL:"horizontal",VERTICAL:"vertical"}),s=Object.freeze({LTR:"ltr",RTL:"rtl"});class l{static getElementOffset(e){return{top:e.offsetTop,left:e.offsetLeft,right:innerWidth-e.offsetLeft-e.clientWidth,bottom:innerHeight-e.offsetTop-e.clientHeight}}static getChildren(e){const T=e.children;return Array.from(T).filter(L=>L instanceof HTMLElement)}static getElementsSize(e,T,L){let h=0;return e.reduce((d,c)=>{if(!d){switch(T){case t.HORIZONTAL:h=c.clientWidth;break;case t.VERTICAL:h=c.clientHeight;break}return c}const m=l.getElementOffset(d),o=l.getElementOffset(c);switch(`${T}-${L}`){case`${t.HORIZONTAL}-${s.LTR}`:h=c.clientWidth+h+(o.left-m.left-d.clientWidth);break;case`${t.HORIZONTAL}-${s.RTL}`:h=c.clientWidth+h+(o.right-m.right-d.clientWidth);break;case`${t.VERTICAL}-${s.LTR}`:h=c.clientHeight+h+(o.top-m.top-d.clientHeight);break;case`${t.VERTICAL}-${s.RTL}`:h=c.clientHeight+h+(o.bottom-m.bottom-d.clientHeight);break}return c},null),h}static getScopeSize(e,T){return T===t.HORIZONTAL?e.offsetWidth:e.offsetHeight}static getVisibleElements(e,T,L,h){const d=[],c=[],m=(o,f)=>{o?c.push(f):d.push(f)};return e.forEach(o=>{const f=l.getElementOffset(o);switch(`${T}-${L}`){case`${t.HORIZONTAL}-${s.LTR}`:m(f.left+o.clientWidth<=h,o);break;case`${t.HORIZONTAL}-${s.RTL}`:m(f.right+o.clientWidth<=h,o);break;case`${t.VERTICAL}-${s.LTR}`:m(f.top+o.clientHeight<=h,o);break;case`${t.VERTICAL}-${s.RTL}`:m(f.bottom+o.clientHeight<=0,o);break}}),{visibleElements:d,inVisibleElements:c}}}customElements.get(n)||customElements.define(n,(w=class extends HTMLElement{constructor(){super(...arguments);R(this,A);R(this,b);R(this,E);R(this,$);R(this,g);a(this,"speed",2);a(this,"mode",t.HORIZONTAL);a(this,"direction",s.LTR);a(this,"wrapper",document.createElement("div"));a(this,"scopeSize",0);a(this,"wrapperSize",0);a(this,"moveTo",0);a(this,"point",0);a(this,"frameInterval",1e3/60);a(this,"previousTime",performance.now())}connectedCallback(){this.speed=Number(this.getAttribute("speed"))||2,this.mode=this.getAttribute("mode")||t.HORIZONTAL,this.direction=this.getAttribute("dir")||s.LTR,this.addEventListener(O,()=>{this.wrapper=this.querySelector(i),this.style.display="block",this.style.overflow="hidden",this.mode==="horizontal"?(this.style.width="100%",this.style.maxWidth=`${innerWidth}px`):(this.style.height=this.style.height||"100vh",this.style.maxHeight=`${innerHeight}px`),this.scopeSize=l.getScopeSize(this,this.mode),this.wrapperSize=l.getElementsSize(l.getChildren(this.wrapper),this.mode,this.direction),p(this,A,v).call(this),p(this,b,z).call(this)})}},A=new WeakSet,v=function(){const e=this.wrapper.innerHTML;for(;this.wrapperSize<this.scopeSize+this.scopeSize/3;)this.wrapper.innerHTML=this.wrapper.innerHTML+e,this.wrapperSize=l.getElementsSize(l.getChildren(this.wrapper),this.mode,this.direction)},b=new WeakSet,z=function(){this.moveTo=this.wrapperSize-this.scopeSize,this.mode===t.VERTICAL&&this.direction===s.RTL&&(this.moveTo=this.scopeSize-this.wrapperSize,p(this,E,u).call(this,this.moveTo)),requestAnimationFrame(p(this,g,I).bind(this))},E=new WeakSet,u=function(e){switch(`${this.mode}-${this.direction}`){case`${t.HORIZONTAL}-${s.LTR}`:this.wrapper.style.transform=`translateX(-${Math.ceil(e)}px)`;break;case`${t.HORIZONTAL}-${s.RTL}`:this.wrapper.style.transform=`translateX(${Math.ceil(e)}px)`;break;case`${t.VERTICAL}-${s.LTR}`:this.wrapper.style.transform=`translateY(-${Math.ceil(e)}px)`;break;case`${t.VERTICAL}-${s.RTL}`:this.wrapper.style.transform=`translateY(${Math.ceil(e)}px)`;break}},$=new WeakSet,C=function(){return this.mode===t.VERTICAL&&this.direction===s.RTL?this.moveTo+this.point>=0:this.point>=this.moveTo},g=new WeakSet,I=function(e){const L=(e-this.previousTime)/this.frameInterval,h=this.speed*L;if(this.previousTime=e,this.point=this.point+h,this.mode===t.VERTICAL&&this.direction===s.RTL?p(this,E,u).call(this,this.moveTo+this.point):p(this,E,u).call(this,this.point),p(this,$,C).call(this)){const{visibleElements:d,inVisibleElements:c}=l.getVisibleElements(l.getChildren(this.wrapper),this.mode,this.direction,this.point),m=l.getElementsSize(d,this.mode,this.direction);c.forEach(f=>{this.wrapper.appendChild(f)});const o=m-this.scopeSize;this.point=o>0?o:0,this.mode===t.VERTICAL&&this.direction===s.RTL?p(this,E,u).call(this,this.moveTo+this.point):p(this,E,u).call(this,this.point)}requestAnimationFrame(p(this,g,I).bind(this))},w)),customElements.get(i)||customElements.define(i,class extends HTMLElement{constructor(){super();a(this,"mode",t.HORIZONTAL);a(this,"direction",s.LTR);const e=this.closest("marquee-component");e&&(this.mode=e.getAttribute("mode")||t.HORIZONTAL,this.direction=e.getAttribute("dir")||s.LTR,this.style.display="flex",this.mode===t.HORIZONTAL?this.style.flexDirection="row":this.style.flexDirection="column",this.mode===t.VERTICAL&&this.direction===s.RTL&&(this.style.flexDirection="column-reverse"))}connectedCallback(){this.addEventListener(O,()=>{const e=this.closest(n);e&&e.dispatchEvent(new Event(O))},{once:!0})}}),customElements.get(r)||customElements.define(r,class extends HTMLElement{connectedCallback(){const H=this.closest(i);H&&H.dispatchEvent(new Event(O))}})});
